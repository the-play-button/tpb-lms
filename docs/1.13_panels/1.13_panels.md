# 1.13 - Panels LMS

## 1. Panels EXISTANTS

### Header (`index.html` L19-43)

| Ã‰lÃ©ment | Composant | DonnÃ©es |
|---------|-----------|---------|
| Logo | `.logo` | Statique |
| Streak | `#streakDays` | `profile.streak` |
| XP | `#totalXP` | `profile.total_xp` |
| Level | `#userLevel` | CalculÃ© depuis XP |
| Avatar | `#userAvatar` | Emoji fixe ğŸ‘¤ |

### Sidebar (`index.html` L48-61)

| Ã‰lÃ©ment | Composant | DonnÃ©es |
|---------|-----------|---------|
| Liste cours | `#somList` | `courses[]` |
| Badges grid | `#badgesGrid` | `badges[]` |

### Welcome Screen (`index.html` L67-84)

| Ã‰lÃ©ment | Composant | DonnÃ©es |
|---------|-----------|---------|
| VidÃ©os vues | `#videosWatched` | `profile.videos_watched` |
| Quiz rÃ©ussis | `#quizzesPassed` | `profile.quizzes_passed` |
| SOMs complÃ©tÃ©s | `#somsCompleted` | `profile.soms_completed` |

### Leaderboard (`index.html` L88+)

| Ã‰lÃ©ment | Composant | DonnÃ©es |
|---------|-----------|---------|
| Top 10 users | `#leaderboard` | `v_leaderboard` |
| Rank user | - | `rank` dans leaderboard |

### Course Viewer (`index.html` L64-86)

| Ã‰lÃ©ment | Composant | DonnÃ©es |
|---------|-----------|---------|
| Video player | `#videoPlayer` | CF Stream embed |
| Quiz embed | Tally iframe | `tally_form_id` |
| Navigation | Prev/Next buttons | `currentStepIndex` |
| Progress | Step indicator | `signals.can_access_step` |

---

## 2. Panels CIBLES

### 2.1 User Settings Panel

> **RÃ´le requis** : student, instructor, admin
> **Intent** : `settings:read`, `settings:write`

| Ã‰lÃ©ment | MVP | V2 | Source | Notes |
|---------|-----|-----|--------|-------|
| Nom / PrÃ©nom | âœ… | - | `lms_student.name` | Ã‰ditable |
| Email | âœ… | - | `lms_student.emails_json` | Read-only (SSO) |
| Avatar | âœ… | - | `lms_student.image_url` | Upload ou URL |
| PrÃ©fÃ©rences langue | - | âœ… | Ã€ crÃ©er | GAP-502 (i18n) |
| Timezone | - | âœ… | Ã€ crÃ©er | - |
| Notifications | - | âœ… | Ã€ crÃ©er | Email prefs |
| Export donnÃ©es RGPD | - | âœ… | - | Compliance |
| Supprimer compte | - | âœ… | - | RGPD droit Ã  l'oubli |

**Endpoints requis :**
- `GET /api/student` (existe)
- `PUT /api/student` (Ã  crÃ©er)

---

### 2.2 User Dashboard (GAP-104)

> **RÃ´le requis** : student, instructor, admin
> **Intent** : `dashboard:read`

| Ã‰lÃ©ment | Source vue | PrioritÃ© | Notes |
|---------|------------|----------|-------|
| **Course progress cards** | `v_course_progress` | P1 | % complÃ©tion, resume button |
| **Skill mastery %** | `v_skill_mastery` | P1 | Progress bar 0â†’100% |
| **Course mastery %** | `v_course_mastery` | P1 | AgrÃ©gat par cours |
| Streak calendar | `v_streak_history` | P2 | Heatmap GitHub-style |
| Recent activity | `v_user_activity` | P2 | Timeline events |
| Badges rÃ©cents | `gamification_award` | P2 | Derniers badges gagnÃ©s |

**Endpoint requis :**
- `GET /api/front_dashboard` (GAP-705)

**Wireframe conceptuel :**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  My Progress                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Course 1     â”‚  â”‚ Course 2     â”‚  â”‚ Course 3     â”‚  â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘   â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘   â”‚  â”‚ â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚  â”‚
â”‚  â”‚ 80%          â”‚  â”‚ 60%          â”‚  â”‚ 20%          â”‚  â”‚
â”‚  â”‚ [Resume]     â”‚  â”‚ [Resume]     â”‚  â”‚ [Start]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Streak: ğŸ”¥ 7 days     XP: âš¡ 1,250     Rank: #12      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Recent Badges: ğŸ† First Quiz  ğŸ¯ 5-Day Streak         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.3 Admin Panel (GAP-106)

> **RÃ´le requis** : admin
> **Intent** : `admin:read`, `student:read`, `instructor:read`

| Section | Ã‰lÃ©ments | Source | PrioritÃ© |
|---------|----------|--------|----------|
| **Overview** | Total students, active 7d, completion rate | `v_admin_overview` | P1 |
| **Students table** | Liste paginÃ©e, search, filter | `/api/students` | P1 |
| **Engagement KPIs** | DAU, WAU, avg session | `v_user_activity` | P1 |
| **Course stats** | Completion rates par cours | `v_course_progress` | P1 |
| CRUD Students | Create, Edit, Delete | `/api/students` CRUD | P2 |
| CRUD Instructors | Create, Edit, Delete | `/api/instructors` CRUD | P2 |
| CRUD Courses | Create, Edit, Delete | `/api/courses` CRUD | P2 |
| Audit logs | Who did what | `audit_log` (GAP-1204) | P3 |
| Entropy metrics | Orphans, stale, abandoned | `v_orphan_signals`, etc. | P3 |

**Endpoint requis :**
- `GET /api/front_admin` (GAP-706)

**Wireframe conceptuel :**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Dashboard                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 127     â”‚  â”‚ 89      â”‚  â”‚ 72%     â”‚  â”‚ 4.2     â”‚    â”‚
â”‚  â”‚ Studentsâ”‚  â”‚ Active  â”‚  â”‚ Compl.  â”‚  â”‚ Avg.daysâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Students                              [+ Add Student]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Name          â”‚ Email           â”‚ Progress â”‚ ... â”‚  â”‚
â”‚  â”‚ Alice Dupont  â”‚ alice@...       â”‚ 85%      â”‚ ... â”‚  â”‚
â”‚  â”‚ Bob Martin    â”‚ bob@...         â”‚ 42%      â”‚ ... â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.4 Beta Testeurs Panel

> **RÃ´le requis** : student (beta flag) ou instructor
> **Intent** : `beta:read`, `beta:write`

| Ã‰lÃ©ment | MVP | V2 | Notes |
|---------|-----|-----|-------|
| **Feedback form** | âœ… | - | Tally embed |
| **Reset progress** | âœ… | - | Appel `/api/signals/*/reset` |
| **Version info** | âœ… | - | Build number, date, changelog |
| Feature flags | - | âœ… | Activer/dÃ©sactiver features |
| Debug logs | - | âœ… | Session recording (GAP-1105) |
| Test accounts | - | âœ… | Switch user pour tests |

**Endpoints requis :**
- `POST /api/signals/:courseId/reset` (existe)
- `GET /api/version` (Ã  crÃ©er, trivial)

---

## 3. Mapping RÃ´les â†’ Panels (de 1.12)

| Panel | guest | student | instructor | admin |
|-------|-------|---------|------------|-------|
| Header stats | âŒ | âœ… | âœ… | âœ… |
| Sidebar | âŒ | âœ… | âœ… | âœ… |
| Welcome Screen | âŒ | âœ… | âœ… | âœ… |
| Leaderboard | âŒ | âœ… | âœ… | âœ… |
| Course Viewer | âŒ | âœ… | âœ… | âœ… |
| User Settings | âŒ | âœ… | âœ… | âœ… |
| User Dashboard | âŒ | âœ… | âœ… | âœ… |
| Admin Panel | âŒ | âŒ | âŒ | âœ… |
| Beta Panel | âŒ | âœ… (beta) | âœ… | âœ… |

---

## 4. Priorisation MVP vs V2

| Panel | MVP | V2 | V3+ |
|-------|-----|-----|-----|
| **User Settings** | Profil basique | RGPD, notifications | - |
| **User Dashboard** | Progress cards, mastery | Calendar, activity | - |
| **Admin Panel** | Overview, students list | CRUD complet, audit | Entropy |
| **Beta Panel** | Feedback, reset, version | Debug tools | - |

---

## 5. GAPs

| ID | Panel | Existant | Cible | SÃ©vÃ©ritÃ© |
|----|-------|----------|-------|----------|
| GAP-1301 | User Settings | âŒ | Page profil/prÃ©fÃ©rences | P2 |
| GAP-1302 | Admin Panel | âŒ | Dashboard admin complet | P1 |
| GAP-1303 | Beta Panel | âŒ | Outils feedback/debug | P2 |

### DÃ©pendances

| GAP Panel | DÃ©pend de |
|-----------|-----------|
| GAP-1301 | GAP-1205 (lms_student) |
| GAP-1302 | GAP-604 (v_admin_overview), GAP-706 (front_admin) |
| GAP-1303 | - (peut Ãªtre fait en standalone) |

---

## 6. Outputs pour Phase 4

### Composants frontend Ã  crÃ©er

| Composant | Panel | PrioritÃ© |
|-----------|-------|----------|
| `UserSettings.js` | User Settings | P2 |
| `UserDashboard.js` | User Dashboard | P1 |
| `AdminDashboard.js` | Admin Panel | P1 |
| `BetaPanel.js` | Beta Panel | P2 |
| `CourseProgressCard.js` | User Dashboard | P1 |
| `StudentsTable.js` | Admin Panel | P1 |
| `KPICard.js` | Admin Panel | P1 |

### Routes frontend Ã  ajouter

| Route | Composant | RÃ´le requis |
|-------|-----------|-------------|
| `/settings` | UserSettings | student+ |
| `/dashboard` | UserDashboard | student+ |
| `/admin` | AdminDashboard | admin |
| `/beta` | BetaPanel | beta flag |

---

*Mis Ã  jour le : 2024-12-28*

